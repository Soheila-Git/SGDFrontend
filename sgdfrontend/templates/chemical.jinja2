<!DOCTYPE html>

<title>{{ chemical.display_name }} Chemical</title>

{% extends "templates/global_layout.jinja2" %}


{% block body %}

<div id="center_title" class="row">
	<h2><span class="gene_name">{{ chemical.display_name }}</span> Chemical</h2>
</div>

<div class="row">
	
<!-- Includes navbar.html into template -->
{% include "templates/navbar.jinja2" %}

<div class="small-12 large-9 columns content-column"> 

<!-- Summary
================================================== -->	
<section id="summary" data-magellan-destination="summary">
	<div class="page-header">
		<h1>Summary</h1>
	</div>
</section>

<!-- Genes
================================================== -->
<section id="annotations" data-magellan-destination="annotations">
	<div class="page-header">
		<h1>Annotations <span class="round secondary label"><span id="evidence_header"></span> <small>entries for</small> <span id="gene_header_id"></span> <small>genes</small></span></h1>
		<p id='evidence_message' style='display:none'>No genes curated.</p>
		<div id='evidence_wrapper'>
			<div class="button-bar">
				<ul class="button-group radius">
					<li><a disabled="true" id="evidence_table_download" class="small button secondary"><i class='icon-download-alt'></i> Download</a></li>
				</ul>
						
				<ul class="button-group radius">
					<li><a disabled="true" id="evidence_table_analyze" class="small button secondary"><i class='icon-briefcase'></i> Analyze</a></li>
				</ul>
			</div>
			
			<table class='table table-striped table-bordered table-condensed' id='evidence_table' width="100%">
			<thead>
  			<tr>
                <th>Gene</th>
  				<th>Gene Format Name</th>
  				<th>Phenotype</th>
  				<th>Experiment Type</th>
  				<th>Mutant Information</th>
  				<th>Strain Background</th>
  				<th>Chemical</th>
    			<th>Details</th>
          		<th>Reference</th>
  			</tr>
  			</thead>
			</table>
        </div>
   </div>
   <br>
	<br>
	<br>
	<br>
	<br>
	<br>
</section>

</div>
</div>
{% endblock body %}

{% block scripts %}
<script src="/static/js/cytoscape/cytoscape.min.js"></script>	
<script src="/static/js/cytoscape/arbor.js"></script>
<script src="/static/js/local.js"></script>
<script src="/static/js/chemical.js"></script>


<script>
	//Set up navbar
    add_navbar_title('<span class="gene_name">{{ chemical.display_name }}</span><br>Chemical')
    add_navbar_element('Summary', 'summary');
	add_navbar_element('Annotations', 'annotations');
	
</script>

<script>
	//Template links and filenames
	var chemical_details_link = "{{chemical_details_link}}";
	var download_table_link = "{{download_table_link}}";
	var analyze_table_link = "{{analyze_table_link}}";

	var annotations_download_filename = "{{ chemical.display_name }}_annotations";
    var annotations_analyze_filename = "<a href='{{ chemical.link }}' class='gene_name'>{{ chemical.display_name }}</a> Genes";

	$(document).ready(function() {
		//Get evidence data
	  	$.getJSON(chemical_details_link, function(data) {
	  		var header_id = "evidence_header";
	  		var chemical_header_id = "gene_header_id";
	  		var table_id = "evidence_table";
	  		var download_button_id = "evidence_table_download";
	  		var analyze_button_id = "evidence_table_analyze";
	  			
	  		var message_id = "evidence_message";
	  		var wrapper_id = "evidence_wrapper";


	  		if(data.length > 0) {
	  			set_up_evidence_table(header_id, chemical_header_id, table_id, download_button_id,
	  			download_table_link, annotations_download_filename,
	  			analyze_button_id, analyze_table_link, annotations_analyze_filename, data);
	  		}
	  		else {
	  			document.getElementById(message_id).style.display = "block";
	  			document.getElementById(wrapper_id).style.display = "none";
	  			document.getElementById(header_id).innerHTML = 0;
	  			document.getElementById(chemical_header_id).innerHTML = 0;
	  		}
	  	});
	});
</script>
        

{% endblock scripts %}
