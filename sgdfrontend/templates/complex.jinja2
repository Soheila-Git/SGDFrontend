<!DOCTYPE html>

<script>
	var complex_details_link = "{{complex_details_link}}";
    var complex_genes_link = "{{complex_genes_link}}";
    var complex_graph_link = "{{complex_graph_link}}";
	var download_table_link = "{{download_table_link}}";
	var analyze_link = "{{analyze_table_link}}";
    var go_enrichment_link = "{{go_enrichment_link}}";

    var display_name = "{{ complex.display_name }}";
</script>

<title>{{ complex.display_name }}</title>

{% extends "templates/global_layout.jinja2" %}


{% block body %}

<div id="center_title" class="row">
	<h2>Complex: <span class="gene_name">{{ complex.display_name }}</span></h2>
</div>

<!-- Navbar
================================================== -->
<div class="row">
	
<!-- Includes navbar.html into template -->
{% include "templates/navbar.jinja2" %}

<div class="small-12 large-9 columns content-column">

<script>
    add_navbar_title('Complex: <span class="gene_name">{{ complex.display_name }}</span>')
    add_navbar_element('Summary', 'summary');
    add_navbar_element('Genes', 'gene_list');
    add_navbar_element('Enrichment', 'enrichment');
    add_navbar_element('Network', 'network');
    add_navbar_element('Annotations', 'all_go');
</script>

<!-- Summary
================================================== -->	
<section id="summary" data-magellan-destination="summary">
	<div class="page-header">
		<h1>Summary</h1>
        <ul class="unstyled">
		    <li><strong>Associated Gene Ontology Term: </strong><a href="{{ complex.go.link }}">{{ complex.go.display_name }}</a></li>
            <li><strong>Cellular Localization: </strong>{{ complex.cellular_localization }}</li>
            <li><strong>Definition: </strong>{{ complex.description }}</li>
        </ul>
	</div>
</section>

<!-- Gene List
================================================== -->
<section id="gene_list" data-magellan-destination="gene_list">
	<div class="page-header">
		<h1>Genes  <span id="gene_list_header" class="round secondary label"></span></h1>

		<div class="button-bar">
			<ul class="button-group radius">
				<li><a id="gene_list_table_download" class="small button secondary"><i class='icon-download-alt'></i> Download</a></li>
			</ul>
		</div>

		<table class='table table-striped table-bordered table-condensed' id='gene_list_table' width="100%">
			<thead>
  				<tr>
  				    <th>Gene ID</th>
  				    <th>Analyze ID</th>
  					<th>Gene Systematic Name</th>
  					<th>Gene Name</th>
  					<th>Description</th>
  				</tr>
  			</thead>
		</table>
	</div>
</section>

<!-- Enrichment
================================================== -->
<section id="enrichment" data-magellan-destination="enrichment">
	<div class="page-header">
		<h1>Shared GO Processes <span class="round secondary label"><span id="enrichment_header"></span> <small>entries for</small> <span id="enrichment_gene_header"></span> <small>genes</small></span></h1>
		<div>
			<div class="button-bar">
				<ul class="button-group radius">
					<li><a id="enrichment_table_download" class="small button secondary"><i class='icon-download-alt'></i> Download</a></li>
				</ul>
				<ul class="button-group radius">
					<li><a id="enrichment_table_recalculate" class="small button secondary" style="display:none">Recalculate With New Filter</a></li>
				</ul>
			</div>

			<table class='table table-striped table-bordered table-condensed' id='enrichment_table' width="100%">
			<thead>
  			<tr>
  			    <th>GO Term ID</th>
  				<th>GO Term</th>
  				<th>Number of genes</th>
  				<th>P-Value</th>
  			</tr>
  			</thead>
			</table>
        </div>
   </div>
</section>

<!-- Network Visualization
================================================== -->
        <section id="network" data-magellan-destination="network">
            <div class="page-header">
                <h1>Network Visualization</h1>
                <div class="panel">
                    <div id="cy" name="cy" style="width:100%;height:500px"></div>
                    <h5>Filter Genes by # of Biological Process GO Terms Shared With {{ complex.display_name }}:</h5>
                    <div id="slider" class="noUiSlider" style="width:100%"></div>
                    <div id="slider_ticks"></div>
                    <br>
                </div><!-- .panel -->
            </div>
        </section>

<!-- Annotations
================================================== -->
<!-- Includes go_table into template -->
    {% set table_name = "Annotations" %}
    {% set table_type = "all" %}
    {% include "templates/go_table.jinja2" %}

</div>
</div>
{% endblock body %}

{% block scripts %}
    <script src="/static/js/jquery.nouislider.min.js"></script>
    <script src="/static/js/cytoscape/cytoscape.min.js"></script>
    <script src="/static/js/cytoscape/arbor.js"></script>
    <script src="/static/js/local.js"></script>
    <script src="/static/js/cytoscape.js"></script>
    <script src="/static/js/evidence.js"></script>
    <script src="/static/js/complex.js"></script>
{% endblock scripts %}
