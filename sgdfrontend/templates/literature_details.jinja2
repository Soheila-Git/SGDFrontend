<!DOCTYPE html>

<title>{{display_name}} Literature</title>

{% extends "templates/global_layout.jinja2" %}


{% block body %}

<div id="center_title" class="row">
	<h2><span class="gene_name">{{display_name}}/{{format_name}}</span> Literature</h2>
</div>


<!-- Includes tabs.html into template -->
{% include "templates/tabs.jinja2" %}

<script>
	var lit_tab = document.getElementById('literature_tab');
	lit_tab.id = 'current';
</script>


<!-- Docs nav
================================================== -->
<div class="row">
	<nav id="sidebar" class="small-0 large-3 columns">
		<ul data-magellan-expedition="fixed" class="side-nav" id="side-nav-sticky">
			<li id="nav-title"><h4><a href="{{link}}">{{display_name}}/{{format_name}}</a> Literature</h4></li>
          	<li data-magellan-arrival="summary"><a href="#summary">Summary</a></li>
			<li data-magellan-arrival="primary"><a href="#primary">Primary Literature</a></li>
			<li data-magellan-arrival="network" id="navbar_network"><a href="#network">Network Visualization</a></li>
          	<li data-magellan-arrival="additional"><a href="#additional">Additional Literature</a></li>
          	<li data-magellan-arrival="reviews"><a href="#reviews">Reviews</a></li>
          	<li data-magellan-arrival="go"><a href="#go">Gene Ontology Literature</a></li>
          	<li data-magellan-arrival="phenotype"><a href="#phenotype">Phenotype Literature</a></li>
          	<li data-magellan-arrival="interaction"><a href="#interaction">Interaction Literature</a></li>
          	<li data-magellan-arrival="regulation"><a href="#regulation">Regulation Literature</a></li>
		</ul>
	</nav>
	
	<div class="small-12 large-9 columns content-column">  
		
<!-- Summary
================================================== -->
<section id="summary" data-magellan-destination="summary">
	<div class="page-header">
		<h1>Literature Summary</h1>
		<p><span id="summary_count">-</span> unique references.</p>
	</div>
</section>

<!-- Primary
================================================== -->
<section id="primary" data-magellan-destination="primary">
	<div class="page-header">
		<h1>Primary Literature <span id="primary_header" class="label secondary round"></span></h1>
		<span id='primary_message' class="hide">No primary literature curated.</span>
		<div id='primary_wrapper'>	
			<a id="export_primary" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id="primary_list" class="literature-list">
			</ul>
		</div>
	</div>
</section>

<!-- Network Visualization
================================================== -->
<section id="network" data-magellan-destination="network">
	<div class="page-header">
		<h1>Network Visualization</h1>
		<div class="panel">
			<div id="cy" name="cy" style="width:100%;height:700px"></div>
		</div>
    </div>
</section>

<!-- Additional
================================================== -->
<section id="additional" data-magellan-destination="additional">
	<div class="page-header">
		<h1>Additional Literature <span id="additional_header" class="label secondary round"></span></h1>
		<span id="additional_message" class="hide">No additional literature curated.</span>
		<div id="additional_wrapper">
			<a id="export_additional" class="small button secondary"><i class="icon-download-alt"></i> Download</a>
			<ul id="additional_list" class="literature-list">
			</ul>
		</div>
	</div>
</section>

<!-- Review
================================================== -->
<section id="reviews" data-magellan-destination="reviews">
	<div class="page-header">
		<h1>Reviews <span id="review_header" class="label secondary round"></span></h1>
		<span id='review_message' class="hide">No reviews curated.</span>
		<div id='review_wrapper'>
			<a id="export_review" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id="review_list" class="literature-list">
			</ul>
		</div>
	</div>
</section>

<!-- GO
================================================== -->
<section id="go" data-magellan-destination="go">
	<div class="page-header">
		<h1>Gene Ontology Literature <span id="go_header" class="label secondary round"></span></h1>
		<span id='go_message' class="hide">No gene ontology literature curated.</span>
		<div id='go_wrapper'>
			<a id="export_go" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id="go_list" class="literature-list">
			</ul>
		</div>
	</div>
</section>

<!-- Phenotype
================================================== -->
<section id="phenotype" data-magellan-destination="phenotype">
	<div class="page-header">
		<h1>Phenotype Literature <span id="phenotype_header" class="label secondary round"></span></h1>
		<span id='phenotype_message' class="hide">No phenotype literature curated.</span>
		<div id='phenotype_wrapper'>	
			<a id="export_phenotype" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id="phenotype_list" class="literature-list">
			</ul>
		</div>
	</div>
</section>

<!-- Interaction
================================================== -->
<section id="interaction" data-magellan-destination="interaction">
	<div class="page-header">
		<h1>Interaction Literature <span id="interaction_header" class="label secondary round"></span></h1>
		<span id='interaction_message' class="hide">No interaction literature curated.</span>
		<div id='interaction_wrapper'>	
			<a id="export_interaction" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id="interaction_list" class="literature-list">
			</ul>
		</div>
	</div>
</section>

<!-- Regulation
================================================== -->
<section id="regulation" data-magellan-destination="regulation">
	<div class="page-header">
		<h1>Regulation Literature <span id="regulation_header" class="label secondary round"></span></h1>
		<span id='regulation_message' class="hide">No regulation literature curated.</span>
		<div id='regulation_wrapper'>	
			<a id="export_regulation" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id="regulation_list" class="literature-list">
			</ul>
		</div>
	</div>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
</section>

</div>
</div>

{% endblock body %}

{% block scripts %}

<script src="/static/js/cytoscape/cytoscape.min.js"></script>	
<script src="/static/js/cytoscape/arbor.js"></script>	
<script src="/static/js/literature_details.js"></script>

<script>
	//Template links and filenames
	var literature_overview_link = "{{literature_overview_link}}";
	var literature_details_link = "{{literature_details_link}}";
	var literature_graph_link = "{{literature_graph_link}}";
	var go_references_link = "{{go_references_link}}";
	var phenotype_references_link = "{{phenotype_references_link}}";
	var interaction_references_link = "{{interaction_references_link}}";
	var regulation_references_link = "{{regulation_references_link}}";
  	var download_link = "{{download_link}}";
	var bioent_display_name = "{{display_name}}";
	
	//Graph style
	var graph_style = cytoscape.stylesheet()
	.selector('node')
	.css({
		'content': 'data(name)',
		'font-family': 'helvetica',
		'font-size': 14,
		'text-outline-width': 3,
		'text-valign': 'center',
		'width': 10,
		'height': 10,
		'border-color': '#fff',
		'background-color': "#D0A9F5",
		'text-outline-color': '#fff',
		'color': '#888',
	})
	.selector('edge')
	.css({
		'width': 2,
	})
	.selector("node[sub_type='FOCUS']")
	.css({
		'width': 30,
		'height': 30,
		'background-color': "#fade71",
		'text-outline-color': '#fff',
		'color': '#888',
	})
	.selector("node[type='REFERENCE']")
	.css({
		'shape': 'oval',
		'text-outline-color': '#888',
		'color': '#fff',

		'width': 100,
		'height': 30,
	});
	
	
	$(document).ready(function() {
		
		//Get overview data
  		$.getJSON(literature_overview_link, function(data) {
  			var count_id = "summary_count";
  			
  			set_up_overview(count_id, data);
		});
		
		
		//Get literature
  		$.getJSON(literature_details_link, function(data) {
  			var primary_header_id = "primary_header";
  			var primary_list_id = "primary_list";
  			var primary_message_id = "primary_message";
  			var primary_wrapper_id = "primary_wrapper";
  			var primary_download_button_id = "export_primary";
  			var primary_download_filename = bioent_display_name + "_primary_citations"
  			var primary_data = data['primary'];
  			set_up_reference_list(primary_header_id, primary_list_id, primary_message_id, primary_wrapper_id, primary_download_button_id, download_link, primary_download_filename, primary_data);
  			
  			var additional_header_id = "additional_header";
  			var additional_list_id = "additional_list";
  			var additional_message_id = "additional_message";
  			var additional_wrapper_id = "additional_wrapper";
  			var additional_download_button_id = "export_additional";
  			var additional_download_filename = bioent_display_name + "_additional_citations"
  			var additional_data = data['additional'];
  			set_up_reference_list(additional_header_id, additional_list_id, additional_message_id, additional_wrapper_id, additional_download_button_id, download_link, additional_download_filename, additional_data);
  			
  			var review_header_id = "review_header";
  			var review_list_id = "review_list";
  			var review_message_id = "review_message";
  			var review_wrapper_id = "review_wrapper";
  			var review_download_button_id = "export_review";
  			var review_download_filename = bioent_display_name + "_review_citations"
  			var review_data = data['reviews'];
  			set_up_reference_list(review_header_id, review_list_id, review_message_id, review_wrapper_id, review_download_button_id, download_link, review_download_filename, review_data);
  		
  			var header_id = "go_header";
  			var list_id = "go_list";
  			var message_id = "go_message";
  			var wrapper_id = "go_wrapper";
  			var download_button_id = "export_go";
  			var download_filename = bioent_display_name + "_go_citations"
  			set_up_reference_list(header_id, list_id, message_id, wrapper_id, download_button_id, download_link, download_filename, data['go']);
  			
  			var header_id = "phenotype_header";
  			var list_id = "phenotype_list";
  			var message_id = "phenotype_message";
  			var wrapper_id = "phenotype_wrapper";
  			var download_button_id = "export_phenotype";
  			var download_filename = bioent_display_name + "_phenotype_citations"
  			set_up_reference_list(header_id, list_id, message_id, wrapper_id, download_button_id, download_link, download_filename, data['phenotype']);
  			
  			var header_id = "interaction_header";
  			var list_id = "interaction_list";
  			var message_id = "interaction_message";
  			var wrapper_id = "interaction_wrapper";
  			var download_button_id = "export_interaction";
  			var download_filename = bioent_display_name + "_interaction_citations"
  			set_up_reference_list(header_id, list_id, message_id, wrapper_id, download_button_id, download_link, download_filename, data['interaction']);
  			
  			var header_id = "regulation_header";
  			var list_id = "regulation_list";
  			var message_id = "regulation_message";
  			var wrapper_id = "regulation_wrapper";
  			var download_button_id = "export_regulation";
  			var download_filename = bioent_display_name + "_regulation_citations"
  			set_up_reference_list(header_id, list_id, message_id, wrapper_id, download_button_id, download_link, download_filename, data['regulation']);
  		});
  		
  		//Get graph
  		$.getJSON(literature_graph_link, function(data) {
  			var graph_id = "cy";
  			var section_id = "network";
  			var section_navbar_id = "navbar_network";
  			if(data['nodes'].length > 1) {
  				var cy = setup_cytoscape_vis(graph_id, graph_style, data);
  			}
			else {
				document.getElementById(section_id).style.display = "none";
				document.getElementById(section_navbar_id).style.display = "none";
			}
			
		});

	});
</script>

{% endblock scripts %}
