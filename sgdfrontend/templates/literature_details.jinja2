<!DOCTYPE html>

<title>{{display_name}} Literature</title>

{% extends "templates/global_layout.jinja2" %}


{% block body %}

<div id="center_title" class="row">
	<h2><span class="gene_name">{{display_name}}/{{format_name}}</span> Literature</h2>
</div>


<!-- Includes tabs.html into template -->
{% include "templates/tabs.jinja2" %}

<script>
	var lit_tab = document.getElementById('literature_tab');
	lit_tab.id = 'current';
</script>


<!-- Docs nav
================================================== -->
<div class="row">
	<nav id="sidebar" class="small-3 columns">
		<ul data-magellan-expedition="fixed" class="side-nav" id="side-nav-sticky">
			<li id="nav-title"><h5><a href="{{link}}">{{display_name}}/{{format_name}}</a> Literature</h5></li>
			<li data-magellan-arrival="primary"><a href="#primary">Primary Literature</a></li>
			<li data-magellan-arrival="network"><a href="#network">Network Visualization</a></li>
          	<li data-magellan-arrival="additional"><a href="#additional">Additional Literature</a></li>
          	<li data-magellan-arrival="reviews"><a href="#reviews">Reviews</a></li>
          	<li data-magellan-arrival="go"><a href="#go">Gene Ontology Literature</a></li>
          	<li data-magellan-arrival="phenotype"><a href="#phenotype">Phenotype Literature</a></li>
          	<li data-magellan-arrival="interaction"><a href="#interaction">Interaction Literature</a></li>
		</ul>
	</nav>
	
	<div class="small-9 columns">  

<!-- Primary
================================================== -->
<section id="primary" data-magellan-destination="primary">
	<div class="page-header">
		<h1>Primary Literature <span id='primary_header'></span></h1>
		<span id='primary_message' class="hide">No primary literature curated.</span>
		<div id='primary_wrapper'>	
			<a id="export_primary" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id='primary_list'>
			</ul>
		</div>
	</div>
</section>

<!-- Network Visualization
================================================== -->
<section id="network" data-magellan-destination="network">
	<div class="page-header">
		<h1>Network Visualization</h1>
		<div id="cy" name="cy" style="width:100%;height:700px"></div>
		<br>
    </div>
</section>

<!-- Additional
================================================== -->
<section id="additional" data-magellan-destination="additional">
	<div class="page-header">
		<h1>Additional Literature <span id='additional_header'></span></h1>
		<span id='additional_message' class="hide">No additional literature curated.</span>
		<div id='additional_wrapper'>
			<a id="export_additional" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id='additional_list'>
			</ul>
		</div>
	</div>
</section>

<!-- Review
================================================== -->
<section id="reviews" data-magellan-destination="reviews">
	<div class="page-header">
		<h1>Reviews <span id='review_header'></span></h1>
		<span id='review_message' class="hide">No reviews curated.</span>
		<div id='review_wrapper'>
			<a id="export_review" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id='review_list'>
			</ul>
		</div>
	</div>
</section>

<!-- GO
================================================== -->
<section id="go" data-magellan-destination="go">
	<div class="page-header">
		<h1>Gene Ontology Literature <span id='go_header'></span></h1>
		<span id='go_message' class="hide">No gene ontology literature curated.</span>
		<div id='go_wrapper'>
			<a id="export_go" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id='go_list'>
			</ul>
		</div>
	</div>
</section>

<!-- Phenotype
================================================== -->
<section id="phenotype" data-magellan-destination="phenotype">
	<div class="page-header">
		<h1>Phenotype Literature <span id='phenotype_header'></span></h1>
		<span id='phenotype_message' class="hide">No phenotype literature curated.</span>
		<div id='phenotype_wrapper'>	
			<a id="export_phenotype" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id='phenotype_list'>
			</ul>
		</div>
	</div>
</section>

<!-- Interaction
================================================== -->
<section id="interaction" data-magellan-destination="interaction">
	<div class="page-header">
		<h1>Interaction Literature <span id='interaction_header'></span></h1>
		<span id='interaction_message' class="hide">No interaction literature curated.</span>
		<div id='interaction_wrapper'>	
			<a id="export_interaction" class="small button secondary"><i class='icon-download-alt'></i> Download</a>
			<ul id='interaction_list'>
			</ul>
		</div>
	</div>
</section>
<br>
<br>
<br>
<br>
<br>
<br>
</div>
</div>

{% endblock body %}

{% block scripts %}

<script src="/static/js/cytoscape/cytoscape.min.js"></script>	
<script src="/static/js/cytoscape/arbor.js"></script>	

<script>
	function set_up_primary_list(data) {	
  		document.getElementById("primary_header").innerHTML = '(' + data.length + ')';
  		set_up_references(data, "primary_list");
  		if(data.length == 0) {
  			$("#primary_message").removeClass("hide");
  			$("#primary_wrapper").addClass("hide");
  		}
  		document.getElementById("export_primary").onclick = function f() {download_citations('primary_list', '{{download_link}}', '{{display_name}}_primary_citations')};
	}
	
	function set_up_additional_list(data) {
  		document.getElementById("additional_header").innerHTML = '(' + data.length + ')';
  		set_up_references(data, "additional_list");
  		if(data.length == 0) {
  			$("#additional_message").removeClass("hide");
  			$("#additional_wrapper").addClass("hide");
  		}
  		document.getElementById("export_additional").onclick = function f() {download_citations('additional_list', '{{download_link}}', '{{display_name}}_additional_citations')};
	}
	
	function set_up_review_list(data) {	
  		document.getElementById("review_header").innerHTML = '(' + data.length + ')';
  		set_up_references(data, "review_list");
  		if(data.length == 0) {
  			$("#review_message").removeClass("hide");
  			$("#review_wrapper").addClass("hide");
  		}
  		document.getElementById("export_review").onclick = function f() {download_citations('review_list', '{{download_link}}', '{{display_name}}_review_citations')};
	}
		
	function set_up_go_list(data) {
  		document.getElementById("go_header").innerHTML = '(' + data.length + ')';
  		set_up_references(data, "go_list");
  		if(data.length == 0) {
  			$("#go_message").removeClass("hide");
  			$("#go_wrapper").addClass("hide");
  		}
  		document.getElementById("export_go").onclick = function f() {download_citations('go_list', '{{download_link}}', '{{display_name}}_go_citations')};
	}
		
	function set_up_phenotype_list(data) {
		document.getElementById("phenotype_header").innerHTML = '(' + data.length + ')';
  		set_up_references(data, "phenotype_list");
  		if(data.length == 0) {
  			$("#phenotype_message").removeClass("hide");
  			$("#phenotype_wrapper").addClass("hide");
  		}
  		document.getElementById("export_phenotype").onclick = function f() {download_citations('phenotype_list', '{{download_link}}', '{{display_name}}_phenotype_citations')};
	}
		
	function set_up_interaction_list(data) {
		document.getElementById("interaction_header").innerHTML = '(' + data.length + ')';
  		set_up_references(data, "interaction_list");
  		if(data.length == 0) {
  			$("#interaction_message").removeClass("hide");
  			$("#interaction_wrapper").addClass("hide");
  		}
  		document.getElementById("export_interaction").onclick = function f() {download_citations('interaction_list', '{{download_link}}', '{{display_name}}_interaction_citations')};
	}
	
	$(document).ready(function() {
		//Get bioentevidence data
  		$.getJSON("{{bioent_evidence_table_link}}", function(data) {
  			set_up_primary_list(data['primary']);
  			set_up_additional_list(data['additional']);
  			set_up_review_list(data['reviews']);
  		});
  		
  		//Get go reference data
  		$.getJSON("{{go_references_link}}", set_up_go_list);
  		
  		//Get phenotype reference data
  		$.getJSON("{{phenotype_references_link}}", set_up_phenotype_list);
  		
  		//Get interaction reference data
  		$.getJSON("{{interaction_references_link}}", set_up_interaction_list);
	});
</script>

<script>
var style = cytoscape.stylesheet()
	.selector('node')
	.css({
		'content': 'data(name)',
		'font-family': 'helvetica',
		'font-size': 14,
		'text-outline-width': 3,
		'text-outline-color': '#888',
		'text-valign': 'center',
		'color': '#fff',
		'width': 30,
		'height': 30,
		'border-color': '#fff'
	})
	.selector('edge')
	.css({
		'width': 2,
	})
	.selector("node[sub_type='FOCUS']")
	.css({
		'background-color': "#fade71",
		'text-outline-color': '#fff',
		'color': '#888',
	})
	.selector("node[type='REFERENCE']")
	.css({
		'background-color': "#D0A9F5",
		'shape': 'rectangle',
		'text-outline-color': '#fff',
		'color': '#888',
	});


$.getJSON("{{literature_graph_link}}", function(data) {
	var cy = setup_cytoscape_vis('cy', style, data);
});
</script>

{% endblock scripts %}

