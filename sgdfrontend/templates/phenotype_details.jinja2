<!DOCTYPE html>

<title>{{display_name}} Phenotypes</title>

{% extends "templates/global_layout.jinja2" %}


{% block body %}

<div id="center_title" class="row">
	<h2><span class="gene_name">{{display_name}}/{{format_name}}</span> Phenotypes  <a href="http://www.yeastgenome.org/help/PhenoHelp.html" name="top" class="help"><img src="http://www.yeastgenome.org/images/icon_help_circle_dark.png" alt="Help"></a></h2>
</div>


<!-- Includes tabs.html into template -->
{% include "templates/tabs.jinja2" %}

<script>
	var int_tab = document.getElementById('phenotype_tab');
	int_tab.id = 'current';
</script>

<!-- Docs nav
================================================== -->
<div class="row">
	<nav id="sidebar" class="small-0 large-3 columns">
		<ul data-magellan-expedition="fixed" class="side-nav" id="side-nav-sticky">
			<li id="nav-title"><h4><a href="{{link}}">{{display_name}}/{{format_name}}</a> Phenotypes</h4></li>
          	<li data-magellan-arrival="summary"><a href="#summary">Phenotypes Summary</a></li>
			<li data-magellan-arrival="phenotypes"><a href="#phenotypes">Phenotypes</a></li>
			<li data-magellan-arrival="resources" id="navbar_resources"><a href="#resources">Resources</a></li>
		</ul>
	</nav>
	
	<div class="small-12 large-9 columns content-column">  
		
<!-- Summary
================================================== -->
<section id="summary" data-magellan-destination="summary">
	<div class="page-header">
		<p>This page lists all curated single mutant phenotypes associated with {{display_name}}. <a href='http://www.yeastgenome.org/cache/PhenotypeTree.html'>Browse</a> phenotype terms.</p>
		<h1>Phenotypes Summary</h1>
		<p id='summary_message' style='display:none'>0 Phenotypes curated.</p>
		<p><span id="pheno_count">_</span> phenotypes curated for {{display_name}}.</p>
	</div>
</section>

<!-- Interactions
================================================== -->
<section id="phenotypes" data-magellan-destination="phenotypes">
	<div class="page-header">
		<h1>Phentypes <span class="round secondary label"><span id="evidence_header"></span> <small>entries for</small> <span id="evidence_pheno_header"></span> <small>phenotypes</small></span></h1>
		<p id='evidence_message' style='display:none'>No phenotypes curated.</p>
		<div id='evidence_wrapper'>
			<div class="button-bar">
				<ul class="button-group radius">
					<li><a disabled="true" id="evidence_table_download" class="small button secondary"><i class='icon-download-alt'></i> Download</a></li>
				</ul>
			</div>
			
			<table class='table table-striped table-bordered table-condensed' id='evidence_table' width="100%">
			<thead>
  			<tr>
  				<th></th>
  				<th>Gene</th>
  				<th>Gene Format Name</th>
  				<th>Phenotype</th>
   				<th>Qualifier</th>
  				<th>Experiment Type</th>
  				<th>Mutant</th>
  				<th>Strain</th>
  				<th>Chemical</th>
  				<th>Allele</th>
  				<th>Reporter</th>
    			<th>Reference</th>
    			<th>Note</th>
  			</tr>
  			</thead>
			</table>
        </div>
   </div>
</section>

<!-- Resources
================================================== -->
<section id="resources" data-magellan-destination="resources">
	<div class="page-header">
		<h1>Resources</h1>
		<ul id='resource_list'>
		</ul>
		<p>Curation of mutant phenotypes is an ongoing project at SGD. Please contact SGD curators to let us know of additional phenotype information that should be incorporated.</p>
	</div>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
</section>

</div>
</div>
{% endblock body %}

{% block scripts %}
<script src="/static/js/local.js"></script>
<script src="/static/js/phenotype_details.js"></script>

<script>
	//Template links and filenames
	var phenotype_overview_link = "{{phenotype_overview_link}}";
	var phenotype_details_link = "{{phenotype_details_link}}";
	var phenotype_resources_link = "{{phenotype_resources_link}}";	
	var download_table_link = "{{download_table_link}}";
	var download_table_filename = "{{phenotype_details_filename}}";
		
	$(document).ready(function() {
    	//Get overview data
  		$.getJSON(phenotype_overview_link, function(data) {  	
  			var evidence_gene_header_id = "evidence_pheno_header";
  			var pheno_count_id = "pheno_count";
  			var message_id = "summary_message";
  			var wrapper_id = "summary_wrapper";
  			
  			if(data['count'] > 0){
  				document.getElementById(pheno_count_id).innerHTML = data['count'];
  			}
  			else {
  				document.getElementById(message_id).style.display = "block";
  				document.getElementById(wrapper_id).style.display = "none";
  			}
  			document.getElementById(evidence_gene_header_id).innerHTML = data['count'];
		});
	
		//Get evidence data
  		$.getJSON(phenotype_details_link, function(data) {
  			var header_id = "evidence_header";
  			var table_id = "evidence_table";
  			var download_button_id = "evidence_table_download";
  			
  			var message_id = "evidence_message";
  			var wrapper_id = "evidence_wrapper";
  			
  			if(data.length > 0) {
  				document.getElementById()
  				set_up_evidence_table(header_id, table_id, download_button_id, 
  				download_table_link, download_table_filename, data);
  			}
  			else {
  				document.getElementById(message_id).style.display = "block";
  				document.getElementById(wrapper_id).style.display = "none";
  				document.getElementById(header_id).innerHTML = 0;
  			}
  			
  		});
 
    	
    	//Get resources
	  	$.getJSON(phenotype_resources_link, function(data) {
	  		var resource_list_id = "resource_list";
	  		
	  		var section_id = "resources";
	  		var section_navbar_id = "navbar_resources";
	  		
	  		if(data.length > 0) {
	  			set_up_resources(resource_list_id, data);
	  		}
	  		else {
	  			document.getElementById(section_id).style.display = "none";
				document.getElementById(section_navbar_id).style.display = "none";
	  		}
	  		
	  	});
	});
</script>
        

{% endblock scripts %}
