<!DOCTYPE html>

<script>
    var interaction_details_link = "{{ interaction_details_link }}";
    var regulation_details_link = "{{ regulation_details_link }}";
    var phenotype_details_link = "{{ phenotype_details_link }}";
    var go_details_link = "{{ go_details_link }}";
    var literature_details_link = "{{ literature_details_link }}";

    var download_table_link = "{{ download_table_link }}";
    var analyze_link = "{{ analyze_table_link }}";

    var interaction_download_filename = "{{ reference.display_name }}_interactions";
    var interaction_analyze_filename = "{{ reference.display_name }} interaction genes";
    var regulation_download_filename = "{{ reference.display_name }}_regulation";
    var regulation_analyze_filename = "{{ reference.display_name }} regulation genes";
    var phenotype_download_filename = "{{ reference.display_name }}_phenotypes";
    var phenotype_analyze_filename = "{{ reference.display_name }} phenotype genes";
    var go_download_filename = "{{ reference.display_name }}_go_terms";
    var go_analyze_filename = "{{ reference.display_name }} Gene Ontology terms";

    var display_name = "{{ reference.display_name }}";
    var counts = {{counts|safe}};

    var locus_id = null;
</script>

<title>{{ reference.display_name }}</title>

{% extends "templates/global_layout.jinja2" %}


{% block body %}


<div class="row">


<!-- Navbar
================================================== -->
    <!-- Includes navbar.html into template -->
    {% include "templates/navbar.jinja2" %}

    <div class="small-12 large-9 columns content-column">
        <h2>{{ reference.citation }}</h2>

        <script>
            add_navbar_title('Reference: <span class="gene_name">{{ reference.display_name }}</span>')
            add_navbar_element('Abstract', 'summary');
            add_navbar_element('Interaction Annotations', 'interaction');
            add_navbar_element('Gene Ontology Annotations', 'all_go');
            add_navbar_element('Phenotype Annotations', 'phenotype');
            add_navbar_element('Regulation Annotations', 'all_regulation');
        </script>

<!-- Summary
================================================== -->
        <section id="summary" data-magellan-destination="summary">
            <div class="page-header">
                <h1>Abstract</h1>
                <p>{{ reference.abstract|safe}}</p>
                <ul id="ref_links" class="ref-links">
                    <li>PMID: {{ reference.pubmed_id }}</li>
                    {% for url in reference.urls %}
                        <li><a href="{{ url.link|e }}">{{ url.display_name|e }}</a></li>
                    {% endfor %}
                </ul>

                <ul class="unstyled">
                    <li><strong>Authors:</strong>
                        {% for author in reference.authors %}
                            {% if loop.index < 11 %}<span><a href="{{ author.link|e }}">{{ author.display_name|e }}</a></span>{% if not loop.last %}, {% endif %} {% endif %}
                        {% endfor %}

                        <a id="author_see_more_button" onclick="$('#author_see_more').show();$('#author_see_more_button').hide();$('#author_see_less_button').show();" {% if reference.authors|length <= 10 %}hidden{% endif %}>... See more >></a>
                        <span id="author_see_more" hidden>
                            {% for author in reference.authors %}
                                {% if loop.index >= 11 %}<span><a href="{{ author.link|e }}">{{ author.display_name|e }}</a></span>{% if not loop.last %}, {% endif %} {% endif %}
                            {% endfor %}
                        </span>
                        <a id="author_see_less_button" onclick="$('#author_see_more').hide();$('#author_see_more_button').show();$('#author_see_less_button').hide();" hidden> << See less</a>
                    </li>

                    <li id="primary_list"><strong>Primary Literature For: </strong></li>
                    <li id="additional_list"><strong>Additional Literature For: </strong></li>
                    <li id="review_list"><strong>Review For: </strong></li>
                </ul>
            </div>
        </section>

<!-- Interaction
================================================== -->
        <!-- Includes interaction_table into template -->
        {% set table_name = "Interaction Annotations" %}
        {% include "templates/interaction_table.jinja2" %}

<!-- GO
================================================== -->
        <!-- Includes go_table into template -->
        {% set table_name = "Gene Ontology Annotations" %}
        {% set table_type = "all" %}
        {% include "templates/go_table.jinja2" %}

<!-- Phenotype
================================================== -->
        <!-- Includes phenotype_table into template -->
        {% include "templates/phenotype_table.jinja2" %}

<!-- Regulation
================================================== -->
        <!-- Includes regulation_table into template -->
        {% set table_name = "Regulation Annotations" %}
        {% set table_type = "all" %}
        {% include "templates/regulation_table.jinja2" %}

    </div>
</div>
{% endblock body %}

{% block scripts %}

<script src="/static/js/local.js"></script>
<script src="/static/js/evidence.js"></script>
<script src="/static/js/reference.js"></script>

{% endblock scripts %}
