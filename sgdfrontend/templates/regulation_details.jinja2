<!DOCTYPE html>

<title>{{display_name}} Regulation</title>

{% extends "templates/global_layout.jinja2" %}


{% block body %}

<div id="center_title" class="row">
	<h2><span class="gene_name">{{display_name}}/{{format_name}}</span> Regulation  <a href="http://www.yeastgenome.org/help/function-help/regulation" name="top" class="help"><img src="http://www.yeastgenome.org/images/icon_help_circle_dark.png" alt="Help"></a></h2>
</div>


<!-- Includes tabs.html into template -->
{% include "templates/tabs.jinja2" %}

<script>
	var int_tab = document.getElementById('regulation_tab');
	int_tab.id = 'current';
</script>

<!-- Docs nav
================================================== -->
<div class="row">
	<nav id="sidebar" class="small-3 columns">
		<ul data-magellan-expedition="fixed" class="side-nav" id="side-nav-sticky">
			<li id="nav-title"><h5><a href="{{link}}">{{display_name}}/{{format_name}}</a> Regulation</h5></li>
          	<li data-magellan-arrival="summary"><a href="#summary">Summary</a></li>
			<li data-magellan-arrival="domains"><a href="#domains">Domains and Classification</a></li>
			<li data-magellan-arrival="binding"><a href="#binding">Binding Site Motifs</a></li>
			<li data-magellan-arrival="targets"><a href="#targets">Targets</a></li>
			<li data-magellan-arrival="regulators"><a href="#regulators">Regulators</a></li>
		</ul>
	</nav>
	
	<div class="small-9 columns">  
		
<!-- Summary
================================================== -->
<section id="summary" data-magellan-destination="summary">
	<div class="page-header">
		<h1>Regulation Summary</h1>
		<p id="summary_paragraph"></p>
		
		<ul id="summary_paragraph_reference_list" class="literature-list"></ul>
		
		<div class="panel">
			<div id="summary_diagram"></div>
		
			<div class="button-bar">
				<h5>Analyze</h5>
				<ul class="button-group radius">
					<li><a id="targ" class="small button secondary">Targets</a></li>
					<li><a id="reg" class="small button secondary">Regulators</a></li>
				</ul>
				<ul class="button-group radius">
					<li><a class="small button secondary radius" id="save" download="{{display_name}}_regulation_bar.png"><i class="icon-picture"></i> PNG</a></li>
				</ul>
			</div>
		</div>
	</div>
</section>

<!-- Domains
================================================== -->
<section id="domains" data-magellan-destination="domains">
	<div class="page-header">
		<h1>Domains and Classification <span id="domains_header" class="round secondary label"></span></h1>
		<span id='domains_message'></span>
		<div id='domains_wrapper'>
			<div class="button-bar">
				<ul class="button-group radius">
					<li><a id="domains_table_download" class="small button secondary"><i class='icon-download-alt'></i> Download</a></li>
				</ul>
			</div>
			
			<table class='table table-striped table-bordered table-condensed' id='domains_table' width="100%">
			<thead>
  			<tr>
  				<th>Protein</th>
  				<th>Protein Coordinates</th>
  				<th>Accession ID</th>
  				<th>Description</th>
   				<th>Source</th>
  			</tr>
  			</thead>
			</table>
        </div>
   </div>
</section>

<!-- Binding Sites
================================================== -->
<section id="binding" data-magellan-destination="binding">
	<div class="page-header">
		<h1>Binding Site Motifs</h1>
		<span id='binding_message' style="display:none">{{display_name}} has no known binding site motifs.</span>
		<div id='binding_wrapper'>
			Click on a motif to view <a href="http://yetfasco.ccbr.utoronto.ca" target="_blank">YeTFaSCo</a> record.
			<ul id="binding_motifs"></ul>
        	<h3>View predicted binding sites in the <a href="http://browse.yeastgenome.org/cgi-bin/gbrowse/scgenome/?name={{display_name}}_*&enable=SGD%20PMW%20motifs">Genome Browser</a></h3>
   	    </div>
   </div>
</section>

<!-- Targets
================================================== -->
<section id="targets" data-magellan-destination="targets">
	<div class="page-header">
		<h1>Targets <span id="targets_header" class="round secondary label"></span></h1>
		<span id='targets_message' style="display:none">{{display_name}} has no known targets.</span>
		<div id='targets_wrapper'>
			<div class="button-bar">
				<ul class="button-group radius">
					<li><a id="targets_table_download" class="small button secondary"><i class='icon-download-alt'></i> Download</a></li>
				</ul>
						
				<ul class="button-group radius">
					<li><a id="targets_table_analyze" class="small button secondary"><i class='icon-briefcase'></i> Analyze</a></li>
				</ul>
			</div>
			
			<table class='table table-striped table-bordered table-condensed' id='targets_table' width="100%">
			<thead>
  			<tr>
  				<th>Regulator</th>
  				<th>Regulator Systematic Name</th>
  				<th>Target</th>
  				<th>Target Systematic Name</th>
  				<th>Experiment</th>
  				<th>Conditions</th>
  				<th>Source</th>
   				<th>Reference</th>
  			</tr>
  			</thead>
			</table>
        </div>
   </div>
</section>

<!-- Regulators
================================================== -->
<section id="regulators" data-magellan-destination="regulators">
	<div class="page-header">
		<h1>Regulators <span id="regulators_header" class="round secondary label"></span></h1>
		<span id='regulators_message' style="display:none">{{display_name}} has no known regulators.</span>
		<div id='regulators_wrapper'>
			<div class="button-bar">
				<ul class="button-group radius">
					<li><a id="regulators_table_download" class="small button secondary"><i class='icon-download-alt'></i> Download</a></li>
				</ul>
						
				<ul class="button-group radius">
					<li><a id="regulators_table_analyze" class="small button secondary"><i class='icon-briefcase'></i> Analyze</a></li>
				</ul>
			</div>
			
			<table class='table table-striped table-bordered table-condensed' id='regulators_table' width="100%">
			<thead>
  			<tr>
  				<th>Target</th>
  				<th>Target Systematic Name</th>
  				<th>Regulator</th>
  				<th>Regulator Systematic Name</th>
  				<th>Experiment</th>
  				<th>Conditions</th>
  				<th>Source</th>
   				<th>Reference</th>
  			</tr>
  			</thead>
			</table>
        </div>
   </div>
</section>

<br>
<br>
<br>
<br>
<br>
<br>
</div>
</div>
{% endblock body %}

{% block scripts %}
<script src="/static/js/kinetic-v4.3.3.min.js"></script>
<script src="/static/js/side_bar.js"></script>	
<script src="/static/js/regulation_details.js"></script>

<script>
	//Template links and filenames
	var regulation_overview_link = "{{regulation_overview_link}}";
	var regulation_details_link = "{{regulation_details_link}}";
	var protein_domains_link = "{{protein_domain_details_link}}"
	var binding_site_details_link = "{{binding_site_details_link}}"
	var regulation_graph_link = "{{regulation_graph_link}}";
	var download_table_link = "{{download_table_link}}";
	var domains_table_filename = "{{domains_filename}}";
	var targets_table_filename = "{{targets_filename}}";
	var regulators_table_filename = "{{regulators_filename}}";
	var analyze_link = "{{analyze_link}}";
	var bioent_display_name = "{{display_name}}";
	var bioent_format_name = "{{format_name}}";
	var bioent_link = "{{link}}";
	
	//Side-bar style
	var side_bar_style = {"left_color": "#AF8DC3", "right_color": "#7FBF7B"};
	
	$(document).ready(function() {
    	//Get overview data
  		$.getJSON(regulation_overview_link, function(data) {
  			var summary_paragraph_id = "summary_paragraph";
  			var reference_list_id = "summary_paragraph_reference_list";
  			var diagram_id = "summary_diagram";
  			var save_button_id = "save";
  			var analyze_target_id = "targ";
  			var analyze_regulator_id = "reg";
  			set_up_overview(summary_paragraph_id, reference_list_id, diagram_id, save_button_id, 
  				analyze_target_id, analyze_regulator_id, analyze_link, bioent_display_name, bioent_format_name, bioent_link, 
  				side_bar_style, data);
		});
		
		//Get domain data
  		$.getJSON(protein_domains_link, function(data) {
   			var header_id = "domains_header";
  			var table_id = "domains_table";
  			var wrapper_id = "domains_wrapper";
  			var message_id = "domains_message"
  			var download_button_id = "domains_table_download";
  			set_up_domains_table(header_id, table_id, wrapper_id, message_id, download_button_id, 
  				download_table_link, domains_table_filename, data);
  		});
  		
  		//Get binding site data
  		$.getJSON(binding_site_details_link, function(data) {
  			var wrapper_id = "binding_wrapper";
  			var list_id = "binding_motifs";
  			var message_id = "binding_message";
  			set_up_binding_site(wrapper_id, message_id, list_id, data);
  		});
	
		//Get evidence data
  		$.getJSON(regulation_details_link, function(data) {
  			
  			var target_data = data["targets"];
  			var targets_header_id = "targets_header";
  			var targets_table_id = "targets_table";
  			var targets_wrapper_id = "targets_wrapper";
  			var targets_message_id = "targets_message"
  			var targets_download_button_id = "targets_table_download";
  			var targets_analyze_button_id = "targets_table_analyze";
  			set_up_target_table(targets_header_id, targets_table_id, targets_wrapper_id, targets_message_id,
  				targets_download_button_id, targets_analyze_button_id, 
  				download_table_link, targets_table_filename, 
  				analyze_link, bioent_display_name, bioent_format_name, bioent_link, target_data);
  				
  			var regulator_data = data["regulators"];
  			var regulators_header_id = "regulators_header";
  			var regulators_table_id = "regulators_table";
  			var regulators_wrapper_id = "regulators_wrapper";
  			var regulators_message_id = "regulators_message"
  			var regulators_download_button_id = "regulators_table_download";
  			var regulators_analyze_button_id = "regulators_table_analyze";
  			set_up_regulator_table(regulators_header_id, regulators_table_id, regulators_wrapper_id, regulators_message_id,
  				regulators_download_button_id, regulators_analyze_button_id, 
  				download_table_link, regulators_table_filename, 
  				analyze_link, bioent_display_name, bioent_format_name, bioent_link, regulator_data);
  		});
  		
  		
    
	});
</script>
        

{% endblock scripts %}
