{% extends "global_layout.jinja2" %}

{% block title %}{{ locus.display_name }}{% endblock %}

{% block head %}
<script>
    var locus = {{ locus_js|safe }};
    var sequence_tab = "{{ tabs['sequence_tab'] }}";
</script>
{% endblock %}

{% block body %}

<div id="center_title" class="row">
	<h1><span class="gene_name">{% if locus.display_name == locus.format_name %}{{ locus.display_name }}{% else %}{{ locus.display_name }} / {{ locus.format_name }}{% endif %}</span></h1>
</div>

<!-- Tabs
================================================== -->
<!-- Includes tabs.html into template -->
{% include "tabs.jinja2" %}
<script>document.getElementById('summary_tab').id = 'current';</script>

<!-- Navbar
================================================== -->
<div class="row">
	
    <!-- Includes navbar.html into template -->
    {% include "navbar.jinja2" %}

    <div class="small-12 large-9 columns content-column">

        <script>
            //Set up navbar
            add_navbar_title('<a href="{{ locus.link }}">{% if locus.display_name == locus.format_name %}{{ locus.display_name }}{% else %}{{ locus.display_name }} / {{ locus.format_name }}{% endif %}</a>');
            add_navbar_element('Locus Overview', 'overview');
            {% if tabs['sequence_tab'] %}
                add_navbar_element('Sequence', 'sequence');
            {% endif %}
            {% if tabs['protein_tab'] %}
                add_navbar_element('Protein', 'protein');
            {% endif %}
            {% if tabs['go_tab'] %}
                add_navbar_element('Gene Ontology', 'go');
            {% endif %}
            {% if tabs['phenotype_tab'] %}
                add_navbar_element('Phenotype', 'phenotype');
            {% endif %}
            {% if tabs['interaction_tab'] %}
                add_navbar_element('Interaction', 'interaction');
            {% endif %}
            {% if tabs['regulation_tab'] %}
                add_navbar_element('Regulation', 'regulation');
            {% endif %}
            {% if tabs['expression_tab'] %}
                add_navbar_element('Expression', 'expression');
            {% endif %}
            {% if locus.paragraph != None %}
                add_navbar_element('Summary Paragraph', 'paragraph');
            {% endif %}
            {% if tabs['literature_tab'] %}
                add_navbar_element('Literature', 'literature');
            {% endif %}
            {% if tabs['history_tab'] %}
                add_navbar_element('History', 'history');
            {% endif %}
            add_navbar_element('References', 'references');
            {% for url in locus.urls if url.category == 'LSP' %}{% if loop.first %}
                add_navbar_element('Resources', 'resources');
            {% endif %}{% endfor %}
        </script>

<!-- Overview
================================================== -->
    <section id="overview" data-magellan-destination="overview">
        <h2>Locus Overview
        </h2>
        <div class="panel">

            <dl class="key-value">
                <dt>Standard Name</dt>
                <dd>{{ locus.display_name }}
                    {% if 'gene_name' in locus.qualities and locus.qualities.gene_name.references|length > 0 %}
                        <a href="#" data-dropdown="drop_gene_name"><i class="fa fa-info-circle"></i></a>
                        <p id="drop_gene_name" class="f-dropdown content medium" data-dropdown-content>
                            {% for reference in locus.qualities.gene_name.references %}
                                <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                    {% endif %}
                </dd>

                <dt>Systematic Name</dt>
                <dd>{{ locus.format_name }}</dd>

                <dt>SGD ID</dt>
                <dd>{{ locus.sgdid }}</dd>

                {% for alias in locus.aliases if alias.category == 'Uniform' %}
                    {% if loop.first %}<dt>Aliases</dt><dd>{% endif %}
                    {{ alias.display_name }}
                    {% if alias.references|length > 0 %}
                        <a href="#" data-dropdown="drop_alias_{{ alias.id }}"><i class="fa fa-info-circle"></i></a>
                        <p id="drop_alias_{{ alias.id }}" class="f-dropdown content medium" data-dropdown-content>
                            {% for reference in alias.references %}
                                <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                    {% endif %}
                    {% if not loop.last %},{% else %}</dd>{% endif %}
                {% endfor %}

                <dt>Feature Type</dt>
                <dd>{{ locus.locus_type }}
                    {% if 'feature_type' in locus.qualities and locus.qualities.feature_type.references|length > 0 %}
                        <a href="#" data-dropdown="drop_feature_type"><i class="fa fa-info-circle"></i></a>
                        <p id="drop_feature_type" class="f-dropdown content medium" data-dropdown-content>
                            {% for reference in locus.qualities.feature_type.references %}
                                <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                    {% endif %}
                    {% if locus.qualifier != None %}, {{ locus.qualifier }}{% endif %}
                    {% if 'qualifier' in locus.qualities and locus.qualities.qualifier.references|length > 0 %}
                        <a href="#" data-dropdown="drop_qualifier"><i class="fa fa-info-circle"></i></a>
                        <p id="drop_qualifier" class="f-dropdown content medium" data-dropdown-content>
                            {% for reference in locus.qualities.qualifier.references %}
                                <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                    {% endif %}
                </dd>

                <dt>Description</dt>
                <dd>
                    {{ locus.description }}
                    {% if 'description' in locus.qualities and locus.qualities.description.references|length > 0 %}
                        <a href="#" data-dropdown="drop_description"><i class="fa fa-info-circle"></i></a>
                        <p id="drop_description" class="f-dropdown content medium" data-dropdown-content>
                            {% for reference in locus.qualities.description.references %}
                                <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                    {% endif %}
                </dd>

                {% if locus.name_description != None %}
                    <dt>Name Description</dt>
                    <dd>{{ locus.name_description }}
                        {% if 'name_description' in locus.qualities and locus.qualities.name_description.references|length > 0 %}
                            <a href="#" data-dropdown="drop_name_description"><i class="fa fa-info-circle"></i></a>
                            <p id="drop_name_description" class="f-dropdown content medium" data-dropdown-content>
                                {% for reference in locus.qualities.name_description.references %}
                                    <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                                {% endfor %}
                            </p>
                        {% endif %}
                    </dd>
                {% endif %}

                {% for alias in locus.aliases if alias.category == 'Gene product' %}
                    {% if loop.first %}
                        <dt>Gene Product</dt>
                        <dd>

                        {{ alias.display_name }}
                        {% if alias.references|length > 0 %}
                            <a href="#" data-dropdown="drop_alias_{{ alias.id }}"><i class="fa fa-info-circle"></i></a>
                            <p id="drop_alias_{{ alias.id }}" class="f-dropdown content medium" data-dropdown-content>
                                {% for reference in alias.references %}
                                    <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                                {% endfor %}
                            </p>
                        {% endif %}
                    {% endif %}
                {% endfor %}

                {% if locus.genetic_position != None %}
                    <dt>Genetic Position</dt>
                    <dd>{{ locus.genetic_position }}
                        {% if 'genetic_position' in locus.qualities and locus.qualities.genetic_position.references|length > 0 %}
                            <a href="#" data-dropdown="drop_genetic_position"><i class="fa fa-info-circle"></i></a>
                            <p id="drop_genetic_position" class="f-dropdown content medium" data-dropdown-content>
                                {% for reference in locus.qualities.genetic_position.references %}
                                    <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                                {% endfor %}
                            </p>
                        {% endif %}
                    </dd>
                {% endif %}

                {% if locus.paralogs|length > 0 %}
                    <dt>Paralog</dt>
                    <dd>
                    {% for paralog in locus.paralogs %}
                        <a href="{{ paralog.child.link }}">{{ paralog.child.display_name }}</a>
                        {% if paralog.references|length > 0 %}
                            <a href="#" data-dropdown="drop_paralog_{{ paralog.id }}"><i class="fa fa-info-circle"></i></a>
                            <p id="drop_paralog_{{ paralog.id }}" class="f-dropdown content medium" data-dropdown-content>
                            {% for reference in paralog.references %}
                                <a href="{{ reference.link }}">{{ reference.display_name }}</a>{% if not loop.last %}, {% endif %}
                            {% endfor %}
                            </p>
                        {% endif %}
                        {% if not loop.last %}, {% endif %}
                    {% endfor %}
                    </dd>
                {% endif %}
            </dl>

        </div>
    </section>

<!-- Sequence
================================================== -->
    {% if tabs['sequence_tab'] %}
    <section id="sequence" data-magellan-destination="sequence">
        <a href="/locus/{{ locus.sgdid }}/sequence" class="details-link">Sequence Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Sequence
            <a href="#" data-dropdown="sequence_info"><i class="fa fa-info-circle"></i></a>

            <p id="sequence_info" class="f-dropdown content medium" data-dropdown-content>
                The <i>S. cerevisiae</i> Reference Genome sequence is derived from laboratory strain
                <a href="/strain/S288C/overview">S288C</a>. Download DNA or protein sequence, view genomic context and
                coordinates. Click "Sequence Details" to view all sequence information for this locus, including that
                for other strains.
            </p>
        </h2>
        <div class="panel">
            <button href="#" data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="small radius button secondary dropdown form-pad"><i
                class="fa fa-download"></i> Download Sequence (.txt)</button>
                
            <div class="panel">
                <h3>Location
                    <a href="#" data-dropdown="reference_location_help"><i class="fa fa-question-circle"></i></a>

                    <p id="reference_location_help" class="f-dropdown content medium" data-dropdown-content>
                       Depicts genomic context; mouse over to view names, coordinates, and brief descriptions. Use the
                        links to GBrowse and ORF Map for an interactive view of this region.
                    </p>
                </h3>
                <div class="clearfix">
                    <div id="contig" class="left"></div>
                    <div class="right">
                        View in:
                        {% for url in locus.urls if url.category == 'LOCUS_SEQUENCE' and (url.display_name == 'GBrowse' or url.display_name == 'ORF Map') %}
                            <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <div id="label_chart"></div>
            </div>

            <div id="subfeature_wrapper" class="panel">
                <h3>Subfeatures <span id="subfeature_table_header" class="round secondary label"></span></h3>
                <div id="sublabel_chart"></div>

                <!-- Includes chromosomal_coord_table into template -->
                {% set table_id = "subfeature_table" %}
                {% set include_relative = True %}
                {% set include_version = True %}
                {% include "chromosomal_coord_table.jinja2" %}
            </div>

            <ul id="drop1" data-dropdown-content class="f-dropdown" aria-hidden="true" tabindex="-1">
                <li><a id="genomic_download">Genomic DNA</a></li>
                <li><a id="kb_download">Genomic DNA +/- 1kb</a></li>
                <li><a id="coding_download">Coding DNA</a></li>
                <li><a id="protein_download">Protein</a></li>
            </ul>
        </div>
    </section>
    {% endif %}

<!-- Protein
================================================== -->
    {% if tabs['protein_tab'] %}
    <section id="protein" data-magellan-destination="protein">
        <a href="/locus/{{ locus.sgdid }}/protein" class="details-link">Protein Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Protein
            <a href="#" data-dropdown="protein_info"><i class="fa fa-info-circle"></i></a>

            <p id="protein_info" class="f-dropdown content medium" data-dropdown-content>
                Basic information about the protein. Click "Protein Details" for further information about the protein
                such as abundance data, domains, shared domains with other proteins, protein sequence retrieval for
                various strains, sequence-based physico-chemical proterties, protein modification sites sites, and
                external identifiers for the protein.
            </p>
        </h2>
        <div class="panel">
            <div class="panel">
                 <dl class="key-value">
                     <dt>Length (a.a.)</dt>
                     <dd>{{ locus.protein_overview.length }}</dd>

                     <dt>Molecular Weight (Da)</dt>
                     <dd>{{ locus.protein_overview.molecular_weight }}</dd>

                     <dt>Isoelectric Point</dt>
                     <dd>{{ locus.protein_overview.pi }}</dd>
                 </dl>
            </div>
        </div>
    </section>
    {% endif %}

<!-- GO
================================================== -->
    {% if tabs['go_tab'] %}
    <section id="go" data-magellan-destination="go">
        <a href="/locus/{{ locus.sgdid }}/go" class="details-link">Gene Ontology Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Gene Ontology
            <a href="#" data-dropdown="go_info"><i class="fa fa-info-circle"></i></a>

            <p id="go_info" class="f-dropdown content medium" data-dropdown-content>
                GO Annotations consist of four mandatory components: a gene product, a term from one of the three
                <a href="http://geneontology.org/">Gene Ontology (GO)</a> controlled vocabularies
                (<a href='/ontology/go/molecular_function/overview'>Molecular Function</a>,
                <a href='/ontology/go/biological_process/overview'>Biological Process</a>, and
                <a href='/ontology/go/cellular_component/overview'>Cellular Component</a>), a reference, and an
                evidence code. SGD has manually curated and high-throughput GO Annotations, both derived from the
                literature, as well as computational, or predicted, annotations. Click "Gene Ontology Details" to view
                all GO information and evidence for this locus as well as biological processes it shares with other genes.
            </p>
        </h2>
        <div class="panel">
            {% if locus.go_overview.manual_molecular_function_terms|length + locus.go_overview.manual_biological_process_terms|length + locus.go_overview.manual_cellular_component_terms|length + locus.go_overview.htp_molecular_function_terms|length + locus.go_overview.htp_biological_process_terms|length + locus.go_overview.htp_cellular_component_terms|length + locus.go_overview.computational_annotation_count == 0 %}
                <p>No Gene Ontology data available.</p>
            {% else %}

                {% if 'computational_annotation_count' not in locus.go_overview or locus.go_overview.computational_annotation_count > 0 %}
                    <a href="/locus/{{ locus.sgdid }}/go#comp">View computational annotations</a>
                {% endif %}

                {% if locus.go_overview.manual_molecular_function_terms|length + locus.go_overview.htp_molecular_function_terms|length > 0 %}
                <div class="panel">
                    <h3>Molecular Function</h3>
                    <dl class="key-value">
                        {% if locus.go_overview.manual_molecular_function_terms|length > 0 %}
                        <dt>Manually Curated</dt>
                        <dd><ul style="list-style-type:disc">
                            {% for entry in locus.go_overview.manual_molecular_function_terms %}
                                <li>
                                    <a href="{{ entry.term.link }}">{{ entry.term.display_name }}</a>
                                    {% for code in entry.evidence_codes %}
                                        {% if loop.first %}({% endif %}<a href="{{ code.link }}">{{ code.display_name }}</a>{% if not loop.last %}, {% else %}){% endif %}
                                    {% endfor %}
                                </li>
                            {% endfor %}
                        </ul></dd>
                        {% endif %}

                        {% if locus.go_overview.htp_molecular_function_terms|length > 0 %}
                        <dt>High-Throughput</dt>
                        <dd><ul style="list-style-type:disc">
                            {% for entry in locus.go_overview.htp_molecular_function_terms %}
                                <li>
                                    <a href="{{ entry.term.link }}">{{ entry.term.display_name }}</a>
                                    {% for code in entry.evidence_codes %}
                                        {% if loop.first %}({% endif %}<a href="{{ code.link }}">{{ code.display_name }}</a>{% if not loop.last %}, {% else %}){% endif %}
                                    {% endfor %}
                                </li>
                            {% endfor %}
                        </ul></dd>
                        {% endif %}
                    </dl>
                </div>
                {% endif %}

                {% if locus.go_overview.manual_biological_process_terms|length + locus.go_overview.htp_biological_process_terms|length > 0 %}
                <div class="panel">
                    <h3>Biological Process</h3>
                    <dl class="key-value">
                        {% if locus.go_overview.manual_biological_process_terms|length > 0 %}
                        <dt>Manually Curated</dt>
                        <dd><ul style="list-style-type:disc">
                            {% for entry in locus.go_overview.manual_biological_process_terms %}
                                <li>
                                    <a href="{{ entry.term.link }}">{{ entry.term.display_name }}</a>
                                    {% for code in entry.evidence_codes %}
                                        {% if loop.first %}({% endif %}<a href="{{ code.link }}">{{ code.display_name }}</a>{% if not loop.last %}, {% else %}){% endif %}
                                    {% endfor %}
                                </li>
                            {% endfor %}
                        </ul></dd>
                        {% endif %}

                        {% if locus.go_overview.htp_biological_process_terms|length > 0 %}
                        <dt>High-Throughput</dt>
                        <dd><ul style="list-style-type:disc">
                            {% for entry in locus.go_overview.htp_biological_process_terms %}
                                <li>
                                    <a href="{{ entry.term.link }}">{{ entry.term.display_name }}</a>
                                    {% for code in entry.evidence_codes %}
                                        {% if loop.first %}({% endif %}<a href="{{ code.link }}">{{ code.display_name }}</a>{% if not loop.last %}, {% else %}){% endif %}
                                    {% endfor %}
                                </li>
                            {% endfor %}
                        </ul></dd>
                        {% endif %}
                    </dl>
                </div>
                {% endif %}

                {% if locus.go_overview.manual_cellular_component_terms|length + locus.go_overview.htp_cellular_component_terms|length > 0 %}
                <div class="panel">
                    <h3>Cellular Component</h3>
                    <dl class="key-value">
                        {% if locus.go_overview.manual_cellular_component_terms|length > 0 %}
                        <dt>Manually Curated</dt>
                        <dd><ul style="list-style-type:disc">
                            {% for entry in locus.go_overview.manual_cellular_component_terms %}
                                <li>
                                    <a href="{{ entry.term.link }}">{{ entry.term.display_name }}</a>
                                    {% for code in entry.evidence_codes %}
                                        {% if loop.first %}({% endif %}<a href="{{ code.link }}">{{ code.display_name }}</a>{% if not loop.last %}, {% else %}){% endif %}
                                    {% endfor %}
                                </li>
                            {% endfor %}
                        </ul></dd>
                        {% endif %}

                        {% if locus.go_overview.htp_cellular_component_terms|length > 0 %}
                        <dt>High-Throughput</dt>
                        <dd><ul style="list-style-type:disc">
                            {% for entry in locus.go_overview.htp_cellular_component_terms %}
                                <li>
                                    <a href="{{ entry.term.link }}">{{ entry.term.display_name }}</a>
                                    {% for code in entry.evidence_codes %}
                                        {% if loop.first %}({% endif %}<a href="{{ code.link }}">{{ code.display_name }}</a>{% if not loop.last %}, {% else %}){% endif %}
                                    {% endfor %}
                                </li>
                            {% endfor %}
                        </ul></dd>
                        {% endif %}
                    </dl>
                </div>
                {% endif %}
            {% endif %}
        </div>
    </section>
    {% endif %}

<!-- Phenotype
================================================== -->
    {% if tabs['phenotype_tab'] %}
    <section id="phenotype" data-magellan-destination="phenotype">
        <a href="/locus/{{ locus.sgdid }}/phenotype" class="details-link">Phenotype Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Phenotype
            <a href="#" data-dropdown="phenotype_info"><i class="fa fa-info-circle"></i></a>

            <p id="phenotype_info" class="f-dropdown content medium" data-dropdown-content>
                Phenotype annotations for a gene are curated single mutant phenotypes that require an observable
                (e.g., "cell shape"), a qualifier (e.g., "abnormal"), a mutant type (e.g., null), strain background,
                and a reference. In addition, annotations are classified as classical genetics or high-throughput
                (e.g., large scale survey, systematic mutation set). Whenever possible, allele information and
                additional details are provided. Click "Phenotype Details" to view all phenotype annotations and
                evidence for this locus as well as phenotypes it shares with other genes.
            </p>
        </h2>
        <div class="panel">
            {% if locus.phenotype_overview.classical_phenotypes|length + locus.phenotype_overview.large_scale_phenotypes|length == 0 %}
                <p>No phenotype data available.</p>
            {% else %}
                {% if locus.phenotype_overview.classical_phenotypes|length > 0 %}
                <div class="panel">
                    <h3>Classical Genetics</h3>
                    <dl class="key-value">
                        {% for mutant, phenotypes in locus.phenotype_overview.classical_phenotypes.iteritems() %}
                            <dt>{{ mutant }}</dt>
                            <dd><ul style="list-style-type:disc">
                                {% for phenotype in phenotypes|sort(attribute='display_name') %}
                                     <li><a href="{{ phenotype.link }}">{{ phenotype.display_name }}</a></li>
                                {% endfor %}
                            </ul></dd>
                        {% endfor %}
                    </dl>
                </div>
                {% endif %}

                {% if locus.phenotype_overview.large_scale_phenotypes|length > 0 %}
                <div class="panel">
                    <dl class="key-value">
                        <h3>Large-scale Survey</h3>
                        {% for mutant, phenotypes in locus.phenotype_overview.large_scale_phenotypes.iteritems() %}
                            <dt>{{ mutant }}</dt>
                            <dd><ul style="list-style-type:disc">
                                {% for phenotype in phenotypes|sort(attribute='display_name') %}
                                     <li><a href="{{ phenotype.link }}">{{ phenotype.display_name }}</a></li>
                                {% endfor %}
                            </ul></dd>
                        {% endfor %}
                    </dl>
                </div>
                {% endif %}
            {% endif %}
        </div>
    </section>
    {% endif %}

<!-- Interaction
================================================== -->
    {% if tabs['interaction_tab'] %}
    <section id="interaction" data-magellan-destination="interaction">
        <a href="/locus/{{ locus.sgdid }}/interaction" class="details-link">Interaction Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Interaction
            <a href="#" data-dropdown="interaction_info"><i class="fa fa-info-circle"></i></a>

            <p id="interaction_info" class="f-dropdown content medium" data-dropdown-content>
                Interaction annotations are curated by <a href="http://thebiogrid.org/">BioGRID</a> and include physical
                or genetic interactions observed
                between at least two genes. An interaction annotation is composed of the interaction type, name of the
                interactor, assay type (e.g., Two-Hybrid), annotation type (e.g., manual or high-throughput), and a
                reference, as well as other experimental details. Click "Interaction Details" to view all interaction
                annotations and evidence for this locus, including an interaction visualization.
            </p>
        </h2>
        <div class="panel">
            {% if locus.interaction_overview.total_interactions == 0 %}
                <p>No interaction data available.</p>
            {% else %}
                <p><a href="/locus/{{ locus.sgdid }}/interaction#annotations">{{ locus.interaction_overview.total_interactions }}</a> total interactions for {{ locus.interaction_overview.total_interactors }} unique genes</p>

                {% if locus.interaction_overview.num_phys_interactors  > 0 %}
                <div class="panel">
                    <h3>Physical Interactions</h3>
                    <ul>
                        {% for experiment in locus.interaction_overview.physical_experiments.keys()|sort %}
                            <li>{{ experiment }}: {{ locus.interaction_overview.physical_experiments[experiment] }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                {% if locus.interaction_overview.num_gen_interactors  > 0 %}
                <div class="panel">
                    <h3>Genetic Interactions</h3>
                    <ul>
                        {% for experiment in locus.interaction_overview.genetic_experiments.keys()|sort %}
                            <li>{{ experiment }}: {{ locus.interaction_overview.genetic_experiments[experiment] }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            {% endif %}
        </div>
    </section>
    {% endif %}

<!-- Regulation
================================================== -->
    {% if tabs['regulation_tab'] %}
    <section id="regulation" data-magellan-destination="regulation">
        <a href="/locus/{{ locus.sgdid }}/regulation" class="details-link">Regulation Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Regulation
            <a href="#" data-dropdown="regulation_info"><i class="fa fa-info-circle"></i></a>

            <p id="regulation_info" class="f-dropdown content medium" data-dropdown-content>
                The number of putative Regulators (genes that regulate it) and Targets (genes it regulates) for the
                given locus, based on experimental evidence. This evidence includes data generated through
                high-throughput techniques. Click "Regulation Details" to view all regulation annotations, shared GO
                enrichment among regulation Targets, and a regulator/target diagram for the locus.
            </p>
        </h2>
        <div class="panel">
            <div class="panel">
                {% if locus.regulation_overview.regulator_count + locus.regulation_overview.target_count == 0 %}
                    <p>No regulation data available.</p>
                {% else %}
                    <dl class="key-value">
                         <dt>Regulators</dt>
                         <dd>
                             {% if locus.regulation_overview.regulator_count > 0 %}
                                <a href="/locus/{{ locus.sgdid }}/regulation#regulators">{{ locus.regulation_overview.regulator_count }}</a>
                             {% else %}
                                 {{ locus.regulation_overview.regulator_count }}
                             {% endif %}
                         </dd>

                         <dt>Targets</dt>
                         <dd>
                            {% if locus.regulation_overview.target_count > 0 %}
                                <a href="/locus/{{ locus.sgdid }}/regulation#targets">{{ locus.regulation_overview.target_count }}</a>
                            {% else %}
                                {{ locus.regulation_overview.target_count }}
                            {% endif %}
                         </dd>
                    </dl>
                {% endif %}
            </div>
        </div>
    </section>
    {% endif %}

<!-- Expression
================================================== -->
    {% if tabs['expression_tab'] %}
    <section id="expression" data-magellan-destination="expression">
        <a href="/locus/{{ locus.sgdid }}/expression" class="details-link">Expression Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Expression
            <a href="#" data-dropdown="expression_info"><i class="fa fa-info-circle"></i></a>

            <p id="expression_info" class="f-dropdown content medium" data-dropdown-content>
                Expression data are derived from records contained in the
                <a href="http://www.ncbi.nlm.nih.gov/geo/">Gene Expression Omnibus (GEO)</a>, and are first log2
                transformed and normalized. Referenced datasets may contain one or more condition(s), and as a result
                there may be a greater number of conditions than datasets represented in a single clickable histogram
                bar. The histogram division at 0.0 separates the down-regulated (green) conditions and datasets from
                those that are up-regulated (red). Click "Expression Details" to view all expression annotations and
                details for this locus, including a visualization of genes that share a similar expression pattern.
            </p>
        </h2>
        <div class="panel">
            <div id="two_channel_expression_chart" class="panel"></div>
        </div>
    </section>
    {% endif %}

<!-- Paragraph
================================================== -->
    {% if locus.paragraph != None %}
    <section id="paragraph" data-magellan-destination="paragraph">
        <h2>Summary Paragraph
            <a href="#" data-dropdown="paragraph_info"><i class="fa fa-info-circle"></i></a>

            <p id="paragraph_info" class="f-dropdown content medium" data-dropdown-content>
                A summary of the locus, written by SGD Biocurators following a thorough review of the literature for
                the locus. Note that Summary Paragraphs were no longer created or edited after ----. Instead, the
                Descriptions for the locus were lengthened to capture additional information. Links to gene names and
                curated GO terms are included within the Summary Paragraphs.
            </p>
        </h2>
        <div class="panel">
            <div id="summary_paragraph"></div>
            <p>Last Updated: {{ locus.paragraph.date_created }}</p>
        </div>
    </section>
        {% endif %}

<!-- Literature
================================================== -->
    {% if tabs['literature_tab'] %}
    <section id="literature" data-magellan-destination="literature">
        <a href="/locus/{{ locus.sgdid }}/literature" class="details-link">Literature Details <i class="fa fa-chevron-circle-right"></i></a>
        <h2>Literature
            <a href="#" data-dropdown="literature_info"><i class="fa fa-info-circle"></i></a>

            <p id="literature_info" class="f-dropdown content medium" data-dropdown-content>
                All manually curated literature for the specified gene, organized into topics according to their
                relevance to the gene (Primary Literature, Additional Literature, or Review). Click "Literature Details"
                to view all literature information for this locus, including shared literature between genes.
            </p>
        </h2>
        <div class="panel">
            <div class="panel">
                {% if locus.literature_overview.primary_count + locus.literature_overview.additional_count + locus.literature_overview.review_count == 0 %}
                    <p>No literature data available.</p>
                {% else %}
                    <dl class="key-value">
                        <dt>Primary</dt>
                        {% if locus.literature_overview.primary_count > 0 %}
                            <dd><a href="/locus/{{ locus.sgdid }}/literature#primary">{{locus.literature_overview.primary_count}}</a></dd>
                        {% else %}
                            <dd>{{locus.literature_overview.primary_count}}</dd>
                        {% endif %}

                        <dt>Additional</dt>
                        {% if locus.literature_overview.additional_count > 0 %}
                            <dd><a href="/locus/{{ locus.sgdid }}/literature#additional">{{locus.literature_overview.additional_count}}</a></dd>
                        {% else %}
                            <dd>{{locus.literature_overview.additional_count}}</dd>
                        {% endif %}

                        <dt>Reviews</dt>
                        {% if locus.literature_overview.review_count > 0 %}
                            <dd><a href="/locus/{{ locus.sgdid }}/literature#reviews">{{locus.literature_overview.review_count}}</a></dd>
                        {% else %}
                            <dd>{{locus.literature_overview.review_count}}</dd>
                        {% endif %}
                    </dl>
                {% endif %}
            </div>
        </div>
    </section>
    {% endif %}

<!-- History
================================================== -->
    <section id="history" data-magellan-destination="history">
        <h2>History
            <a href="#" data-dropdown="history_info"><i class="fa fa-info-circle"></i></a>

            <p id="history_info" class="f-dropdown content medium" data-dropdown-content>
                A catalog of any nomenclature and/or sequence changes, or other notes related to the annotation of the feature.
            </p>
        </h2>
        <div>
            {% if locus.history|length == 0 %}
                <p>No history data available.</p>
            {% else %}
                <!-- Includes go_table into template -->
                {% set table_id = "history_table" %}
                {% include "history_table.jinja2" %}
            {% endif %}
        </div>
    </section>

<!-- References
================================================== -->
    <section id="references" data-magellan-destination="references">
        <h2>References
            <a href="#" data-dropdown="reference_info"><i class="fa fa-info-circle"></i></a>

            <p id="reference_info" class="f-dropdown content medium" data-dropdown-content>
                List of references used specifically on this page as citations for information in the Overview (e.g.
                gene names, aliases, Descriptions), Summary Paragraph, or History sections. The complete list of curated
                references associated with this locus can be found by clicking on the "Literature" tab for this locus.
            </p>
        </h2>
        <div class="panel">

        </div>

    </section>

    <!-- Resources
================================================== -->
    {% for url in locus.urls if url.category == 'LSP' %}{% if loop.first %}
    <section id="resources" data-magellan-destination="resources">
        <h2>Resources</h2>
        <div class="panel">
            <p>
                {% for url in locus.urls if url.category == 'LOCUS_LSP'%}
                    <a href="{{ url.link }}" target="_blank">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                {% endfor %}
            </p>
        </div>
    </section>
    {% endif %}{% endfor %}

    </div>
</div>
{% endblock body %}

{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization',
       'version':'1','packages':['corechart', 'timeline']}]}"></script>
<script src="/static/js/local.js"></script>
<script src="/static/js/evidence.js"></script>
<script src="/static/js/locus.js"></script>
{% endblock scripts %}

