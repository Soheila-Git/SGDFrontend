{% extends "global_layout.jinja2" %}

{% block title %}{{ locus.display_name }} Phenotypes{% endblock %}

{% block head %}
<script>
	var phenotype_details_link = "{{phenotype_details_link}}";
	var phenotype_graph_link = "{{phenotype_graph_link}}";
	var download_table_link = "{{download_table_link}}";
    var download_network_link = "{{download_network_link}}";
	var download_table_filename = "{{ locus.display_name}}_phenotypes";
	var phenotype_overview = {{phenotype_overview | safe}};
	var display_name = "{{ locus.display_name }}";
	var class_type = "{{ locus.class_type }}";
</script>
{% endblock %}

{% block body %}

<div id="center_title" class="row">
	<h2><span class="gene_name">{% if locus.display_name == locus.format_name %}{{ locus.display_name }}{% else %}{{ locus.display_name }}/{{ locus.format_name }}{% endif %}</span> Phenotypes  <a href="/help/PhenoHelp.html" name="top" class="help"><img src="/images/icon_help_circle_dark.png" alt="Help"></a></h2>
</div>

<!-- Tabs
================================================== -->
<!-- Includes tabs.html into template -->
{% include "tabs.jinja2" %}
<script>document.getElementById("phenotype_tab").id = "current";</script>

<div class="row">

<!-- Navbar
================================================== -->
    <!-- Includes navbar.html into template -->
    {% include "navbar.jinja2" %}

    <div class="small-12 large-9 columns content-column">

        <script>
            add_navbar_title("<a href='{{ locus.link }}'>{{ locus.display_name }}/{{ locus.format_name }}</a> Phenotypes");
            add_navbar_element("Summary", "summary");
            add_navbar_element("Annotations", "annotations");
            add_navbar_element("Network Visualization", "network");
            add_navbar_element("Resources", "resources");
        </script>

<!-- Summary
================================================== -->
<section id="summary" data-magellan-destination="summary">
	<div class="page-header">
		<h1>Summary</h1>
		<p>This page lists all curated single mutant phenotypes associated with {{ locus.display_name }}.</p>

        <!-- Includes phenotype_overview.html into template -->
        {% include "phenotype_overview.jinja2" %}
	</div>
</section>
<!-- Annotations
================================================== -->
        <section id="annotations" data-magellan-destination="annotations">
            <div class="page-header">
                <h1>Phenotype Annotations <span id="phenotype_table_header" class="round secondary label"></span></h1>
                <!-- Includes phenotype_table into template -->
                {% set table_id = "phenotype_table" %}
                {% include "phenotype_table.jinja2" %}
            </div>
        </section>

<!-- Network Visualization
================================================== -->
        <section id="network" data-magellan-destination="network">
            <div class="page-header">
                <h1>Network Visualization</h1>
                {% set network_id = "cy" %}
                {% include "phenotype_network.jinja2" %}
            </div>
        </section>

<!-- Resources
================================================== -->
        <section id="resources" data-magellan-destination="resources">
            <div class="page-header">
                <h1>Resources</h1>
                <h3>Mutant Strains</h3>
                    <p id="mutant_resources_list">
                        {% for url in locus.urls if url.category == 'LOCUS_PHENOTYPE_MUTANT_STRAINS'%}
                            <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                        {% endfor %}
                    </p>
                <h3>Phenotype Resources</h3>
                    <p id="phenotype_resources_list">
                        {% for url in locus.urls if url.category == 'LOCUS_PHENOTYPE_PHENOTYPE_RESOURCES'%}
                            <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                        {% endfor %}
                    </p>
                <h3>Ontology</h3>
                    <p id="ontology_resources_list">
                        {% for url in locus.urls if url.category == 'LOCUS_PHENOTYPE_ONTOLOGY'%}
                            <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                        {% endfor %}
                    </p>
            </div>
        </section>
    </div>
</div>

{% block scripts %}
<script src="/static/js/build/nouislider.min.js"></script>
<script src="/static/js/build/cytoscape.min.js"></script>
<script src="/static/js/build/arbor.js"></script>
<script src="/static/js/cytoscape.js"></script>
<script src="/static/js/local.js"></script>
<script src="/static/js/evidence.js"></script>
<script src="/static/js/phenotype_details.js"></script>
{% endblock scripts %}

{% endblock body %}
