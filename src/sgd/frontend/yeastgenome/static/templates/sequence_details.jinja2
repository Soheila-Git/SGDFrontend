{% extends "global_layout.jinja2" %}

{% block title %}{{ locus.display_name }} Sequence{% endblock %}

{% block head %}
<script>
	var sequence_details_link = "{{sequence_details_link}}";
    var neighbor_sequence_details_link = "{{neighbor_sequence_details_link}}";
	var download_table_link = "{{download_table_link}}";
    var download_sequence_link = "{{download_sequence_link}}";
	var analyze_link = "{{analyze_table_link}}";

	var display_name = "{{ locus.display_name }}";
	var locus_id = "{{ locus.id }}";
</script>
{% endblock %}

{% block body %}

<div id="center_title" class="row">
	<h2><span class="gene_name">{% if locus.display_name == locus.format_name %}{{ locus.display_name }}{% else %}{{ locus.display_name }}/{{ locus.format_name }}{% endif %}</span> Sequence</h2>
</div>

<!-- Tabs
================================================== -->
<!-- Includes tabs.html into template -->
{% include "tabs.jinja2" %}
<script>document.getElementById('sequence_tab').id = 'current';</script>

<!-- Navbar
================================================== -->
<div class="row">
	
    <!-- Includes navbar.html into template -->
    {% include "navbar.jinja2" %}

    <div class="small-12 large-9 columns content-column">

        <script>
            //Set up navbar
            add_navbar_title('<a href="{{ locus.link }}">{{ locus.display_name }}/{{ locus.format_name }}</a> Sequence');
            add_navbar_element('Summary', 'summary');
            add_navbar_element('Reference Strain - S288C', 'reference');
            add_navbar_element('Alternative Reference Strains', 'alternative');
            add_navbar_element('Other Strains', 'other');
            add_navbar_element('Resources', 'resources');
        </script>

        <!-- Summary
================================================== -->
        <section id="summary" data-magellan-destination="summary">
            <div class="page-header">
                <h1>Summary</h1>
                <!-- Includes sequence_overview into template -->
                {% include "sequence_overview.jinja2" %}
            </div>
        </section>

        <!-- S288C
================================================== -->
        <section id="reference" data-magellan-destination="reference">
            <div class="page-header">
                <h1>S288C</h1>
                <h2 class="subheader">Location - S288C</h2>
                <div id="reference_contig"></div>
                <br>
                <div id="reference_label_chart"></div>
                {% for url in locus.urls if url.category == 'LOCUS_SEQUENCE' and url.display_name == 'GBrowse' %}
                    <a href="{{ url.link }}">View in GBrowse</a>{% if not loop.last %} | {% endif %}
                {% endfor %}
                <h2 class="subheader">Subfeatures <span id="subfeature_table_header" class="round secondary label"></span> - S288C</h2>
                <div id="reference_sublabel_chart"></div>

                <!-- Includes chromosomal_coord_table into template -->
                {% set table_id = "subfeature_table" %}
                {% set include_relative = True %}
                {% set include_version = True %}
                {% include "chromosomal_coord_table.jinja2" %}

                <h2 class="subheader">Sequence - S288C</h2>
                <select id="reference_chooser" class="large-3">
                    <option value="genomic_dna">Genomic DNA</option>
                    <option value="coding_dna">Coding DNA</option>
                    <option value="protein">Protein</option>
                </select>
                <ul id="reference_legend" class="ref-links"></ul>
                <pre><blockquote id="reference_sequence" style="font-family:Monospace"></blockquote></pre>
                <div class="button-bar">
                    <ul class="button-group radius">
                        <li><a id="reference_download" class="small button secondary"><i class="fa fa-download"></i> Download (.txt)</a></li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Alternative Reference
================================================== -->
        <section id="alternative" data-magellan-destination="alternative">
            <div class="page-header">
                <h1>Alternative Reference Strains</h1>
                <label><h3>Strain</h3>
                    <select id="alternative_strain_selection" class="large-3"></select> - <span id="alternative_strain_description"></span>
                </label>
                <h2 class="subheader">Location - <span id="current_alternative_strain_location"></span></h2>
                <div id="alternative_contig"></div>
                <br>
                <div id="alternative_label_chart"></div>
                <h2 class="subheader">Sequence - <span id="current_alternative_strain_sequence"></span></h2>
                <div class="button-bar">
                    <ul class="button-group radius">
                        <li><a id="alternative_download" class="small button secondary"><i class="fa fa-download"></i> Download (.txt)</a></li>
                    </ul>
                </div>
                <select id="alternative_chooser" class="large-3">
                    <option value="genomic_dna">Genomic DNA</option>
                    <option value="coding_dna">Coding DNA</option>
                    <option value="protein">Protein</option>
                </select>
                <pre><blockquote id="alternative_sequence" style="font-family:Monospace"></blockquote></pre>
            </div>
        </section>

        <!-- Other
================================================== -->
        <section id="other" data-magellan-destination="other">
            <div class="page-header">
                <h1>Other Strains</h1>
                <label><h3>Strain</h3>
                    <select id="other_strain_selection" class="large-3"></select> - <span id="other_strain_description"></span>
                </label>
                <div class="button-bar">
                    <ul class="button-group radius">
                        <li><a id="other_download" class="small button secondary"><i class="fa fa-download"></i> Download (.txt)</a></li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Resources
================================================== -->
        <section id="resources" data-magellan-destination="resources">
            <div class="page-header">
                <h1>Resources</h1>
                <p id='resources_list'>
                    {% for url in locus.urls if url.category == 'LOCUS_SEQUENCE'%}
                        <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                    {% endfor %}
                </p>
                <h3>S288C only</h3>
                <p id="reference_only_resources_list">
                    {% for url in locus.urls if url.category == 'LOCUS_SEQUENCE_S288C'%}
                        <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                    {% endfor %}
                </p>
                <h3>S288C vs. other species</h3>
                <p id="other_species_resources_list">
                    {% for url in locus.urls if url.category == 'LOCUS_SEQUENCE_OTHER_SPECIES'%}
                        <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                    {% endfor %}
                </p>
                <h3>S288C vs. other strains</h3>
                <p id="other_strains_resources_list">
                    {% for url in locus.urls if url.category == 'LOCUS_SEQUENCE_OTHER_STRAINS'%}
                        <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                    {% endfor %}
                </p>
            </div>
        </section>

    </div>
</div>

{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization',
       'version':'1','packages':['timeline']}]}"></script>
<script src="/static/js/sequence_details.js"></script>
{% endblock scripts %}

{% endblock body %}
